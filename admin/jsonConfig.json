{
  "i18n": true,
  "type": "tabs",
  "items": {
    "login": {
      "type": "panel",
      "label": "SPOTIFY LOGIN",
      "items": {
        "_alive": {
          "type": "alive",
          "sm": 12
        },
        "_info": {
          "type": "staticText",
          "text": "**Wichtig:** Spotify nutzt OAuth. Du meldest dich bei Spotify an (im Browser), danach speichert der Adapter automatisch ein Refresh-Token.\n\n‚úÖ **Empfohlen:** Der Button **‚ÄûMIT SPOTIFY VERBINDEN‚Äú** √∂ffnet deine **Redirect-URI / Callback-URL** in einem neuen Tab. Der Adapter startet dar√ºber automatisch den Spotify-Login (kein Popup-Blocker-Problem).\n\n**Redirect-URI Regeln:** HTTPS ist Pflicht, au√üer bei Loopback (z.B. http://127.0.0.1:PORT). \"localhost\" ist nicht erlaubt.\n\nüëâ **Tipp (HTTPS + Self-Signed):** Wenn du eine self-signed HTTPS Callback-URL nutzt, musst du die Zertifikat-Warnung im Browser einmal best√§tigen (‚ÄûErweitert‚Äú ‚Üí ‚ÄûTrotzdem √∂ffnen‚Äú). Danach funktioniert der Login-Redirect normal.\n\n‚ÑπÔ∏è **Hinweis:** Nach erfolgreichem Login bitte die Konfig-Seite einmal neu laden (F5), bevor du 'Speichern' klickst ‚Äì sonst k√∂nnte ein altes (leeres) Token versehentlich √ºberschrieben werden."
        },
        "clientId": {
          "type": "text",
          "label": "Spotify Client ID",
          "help": "Spotify Developer Dashboard ‚Üí App ‚Üí Client ID",
          "sm": 12,
          "md": 6
        },
        "clientSecret": {
          "type": "password",
          "label": "Spotify Client Secret (optional)",
          "help": "Optional. Der Adapter nutzt standardm√§√üig PKCE (ohne Secret). Wird verschl√ºsselt gespeichert.",
          "sm": 12,
          "md": 6
        },
        "redirectUri": {
          "type": "text",
          "label": "Redirect URI (Callback URL)",
          "help": "Muss exakt 1:1 im Spotify Developer Dashboard unter Redirect URIs eingetragen sein. Beispiel: https://192.168.10.102:8888/callback",
          "sm": 12,
          "md": 12
        },
        "callbackBindIp": {
          "type": "select",
          "label": "Callback-Server Bind-IP",
          "help": "Meist 0.0.0.0 (alle Interfaces). Bei Problemen (Firewall/Port belegt) anpassen.",
          "options": [
            {
              "label": "0.0.0.0",
              "value": "0.0.0.0"
            },
            {
              "label": "127.0.0.1 (nur lokal)",
              "value": "127.0.0.1"
            }
          ],
          "sm": 12,
          "md": 6
        },
        "generateSelfSignedCert": {
          "type": "checkbox",
          "label": "Self-Signed Zertifikat erzeugen (wenn Redirect URI https ist)",
          "help": "Wenn du https in der Redirect URI nutzt und kein Zertifikat hinterlegt hast, erzeugt der Adapter beim Start ein Self-Signed Zertifikat.",
          "sm": 12,
          "md": 6
        },
        "includeStreamingScope": {
          "type": "checkbox",
          "label": "Web Playback SDK / Streaming Scope (optional)",
          "sm": 12,
          "tooltip": "Aktivieren, wenn du sp√§ter einen Browser-Webplayer (Spotify Web Playback SDK) nutzen willst. F√ºr reine Fernsteuerung von Spotify-Connect-Ger√§ten nicht n√∂tig.",
          "default": false
        },
        "_divider1": {
          "type": "divider",
          "height": 2
        },
        "_connect": {
          "type": "staticLink",
          "label": "MIT SPOTIFY VERBINDEN",
          "href": "${data.redirectUri}",
          "target": "_blank",
          "button": true,
          "variant": "contained",
          "icon": "auth",
          "disabled": "!data.clientId || !data.redirectUri"
        },
        "_disconnect": {
          "type": "sendTo",
          "label": "VERBINDUNG TRENNEN (REFRESH-TOKEN L√ñSCHEN)",
          "command": "oauthDisconnect",
          "jsonData": "{\"_origin\":\"${data._origin}\"}",
          "icon": "unpair",
          "variant": "outlined"
        },
        "_authUrl": {
          "type": "textSendTo",
          "label": "Login-URL (Fallback zum Kopieren)",
          "command": "oauthGetUrl",
          "jsonData": "{\"clientId\":\"${data.clientId}\",\"clientSecret\":\"${data.clientSecret}\",\"redirectUri\":\"${data.redirectUri}\"}",
          "copyToClipboard": true,
          "container": "text",
          "disabled": "!data.clientId || !data.redirectUri"
        },
        "refreshToken": {
          "type": "password",
          "label": "Refresh-Token",
          "help": "Wird nach erfolgreichem OAuth-Login automatisch gesetzt. Wird verschl√ºsselt gespeichert.",
          "sm": 12,
          "md": 12
        }
      }
    },
    "playback": {
      "type": "panel",
      "label": "PLAYBACK & GER√ÑTE",
      "items": {
        "defaultDeviceId": {
          "type": "text",
          "label": "Default Device ID (optional)",
          "help": "Optional: Device-ID, auf die Befehle standardm√§√üig gehen sollen (Spotify Connect).",
          "sm": 12,
          "md": 12
        },
        "pollInterval": {
          "type": "number",
          "label": "Polling Intervall (Sekunden)",
          "help": "Wie oft soll der aktuelle Playback-Status abgefragt werden.",
          "min": 2,
          "max": 60,
          "step": 1,
          "sm": 12,
          "md": 4
        },
        "autoRefreshDevicesOnStart": {
          "type": "checkbox",
          "label": "Devices beim Start aktualisieren",
          "sm": 12,
          "md": 4
        },
        "logApiErrors": {
          "type": "checkbox",
          "label": "API-Fehler detailliert loggen",
          "sm": 12,
          "md": 4
        }
      }
    }
  }
}